<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Tutorial 2</title>
  <meta name="description" content="This site contains information and tutorials on hacking the Atari &#39;Space Invaders&#39; game.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/tutorial2/">
  <link rel="alternate" type="application/rss+xml" title="Invading the invaders" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Invading the invaders</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about_us/">About Us</a>
            
          
            
            
            <a class="page-link" href="/glossary/">Glossary</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/setup/">Set up</a>
            
          
            
            
            <a class="page-link" href="/tutorial1/">Tutorial 1</a>
            
          
            
            
            <a class="page-link" href="/tutorial2/">Tutorial 2</a>
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Tutorial 2</h1>
  </header>

  <div class="post-content">
    <h1 id="changing-sprites-tutorial-2">Changing Sprites (Tutorial 2)</h1>

<p>This second method of changing the game’s graphics is a little more complicated than tutorial 1, as it involves Assembly or ASM hacking. This method will allow you to directly manipulate the game’s code and potentially modify anything within the game, such as gameplay, audio and levels.</p>

<p>Here is an overview of the steps involved in ASM hacking Space Invaders:</p>
<ul>
  <li>Disassemble the ROM image.</li>
  <li>Locate the graphics in the code.</li>
  <li>Use an ASCII config file to further reveal commented representations of the graphics.</li>
  <li>Change the hex data statements.</li>
  <li>Assemble the ROM again.</li>
</ul>

<h3 id="1-disassemble-space-invaders">1) Disassemble Space Invaders</h3>

<p>Run the following command in your terminal:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>distella -paf spcinvad.bin &gt; spcinvad.src
</code></pre>
</div>
<p>By running Space Invaders through the disassembler Distella, you will create the source file needed to change the graphics.</p>

<p>(If the command above is not working for you, then directly drag the distella.exe into the terminal.)</p>

<p>Verify that the disassembly has been executed correctly, by reassembling the source file using DASM. Type the following command in your terminal:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dasm spcinvad.srv -f3 -otest1.bin
</code></pre>
</div>
<p>Check the size of the file test1.bin - it should be 4096 bytes, exactly the same as the original Space Invaders file. Run the test1.bin in the emulator to check that the game is playing as normal.</p>

<h3 id="2-locate-graphics-in-the-code">2) Locate graphics in the code</h3>

<p>Now you will try to locate areas of the source code that are most likely to contain the graphics data.</p>

<p>Firstly, open the source file in a text editor, such as Notepad or Atom.</p>

<p>Search for .byte in the code, then note down the first and last address where .byte exists. In Space Invaders, these addresses should be FBFE-FD66 and FF4C-FFFF.</p>

<p>For example, here is an analysed line (line 1673) from the source file created from Distella:</p>

<table>
  <thead>
    <tr>
      <th>Data contained at each address</th>
      <th>$03</th>
      <th>$17</th>
      <th>$2B</th>
      <th>$23</th>
      <th>$75</th>
      <th>$B4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hexadecimal addresses</td>
      <td>FD61</td>
      <td>FD62</td>
      <td>FD63</td>
      <td>FD64</td>
      <td>FD65</td>
      <td>FD66</td>
    </tr>
  </tbody>
</table>

<p>From left to right, the addresses increase by one in hexadecimal and each piece of data is held at a higher address than the last. (See glossary for further explanation on hexadecimal).</p>

<h3 id="3-create-ascii-config-file">3) Create ASCII config file</h3>

<p>You will now create a config file which will help you to view your source code in a way that will make the graphics data even clearer.</p>

<p>Using a text editor, create an ASCII config file called spcinvad.cfg containing only the following information:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>GFX FBFE FD66
GFX FF4C FFFF
</code></pre>
</div>
<p>These lines in the config file contain the first and last .byte addresses</p>

<p>Use distella again to disassemble the binary file again, this time revealing code that has commented representations of the graphics, to make modifying the graphics easier. Run the following command in terminal (or drag the distella.exe file into terminal again if this does not work):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>distella -paf -cspcinvad.cfg spcinvad.bin &gt; spcinvad.src
</code></pre>
</div>

<p>Now if you view the new spcinvad.src file and search for the memory location ‘FC0A’ you should be able to see the Space Invaders spaceship:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.byte $FE ; |XXXXXXX | $FC0A
.byte $FE ; |XXXXXXX | $FC0B
.byte $7C ; | XXXXX  | $FC0C
.byte $FE ; |XXXXXXX | $FC0D
.byte $38 ; |  XXX   | $FC0E
.byte $38 ; |  XXX   | $FC0F
.byte $7C ; | XXXXX  | $FC10
.byte $38 ; |  XXX   | $FC11
.byte $38 ; |  XXX   | $FC12
.byte $10 ; |   X    | $FC13
</code></pre>
</div>

<p>The first hexadecimal number next to each .byte is the data contained at each byte, the commented ‘X’s are a visual representation of what each byte contains, and the hexadecimal numbers at the end of the line are the memory location of the byte.</p>

<h3 id="4-change-the-sprite-graphical-data">4) Change the sprite graphical data</h3>

<p>By changing the hex value after each .byte, you can alter the shape of the sprites.</p>

<p>Each ‘X’ represents a weighted binary digit. There are eight bits in a byte, and each row of up to eight X’s represents one byte. In order to calculate each byte’s value, you need to add up each value with an X beneath it. For example, the bottom of the spaceship is stored in address FC0A, and has a value of FE:</p>

<p><strong>Binary weighted bits</strong></p>

<table>
  <thead>
    <tr>
      <th>128</th>
      <th>64</th>
      <th>32</th>
      <th>16</th>
      <th>8</th>
      <th>4</th>
      <th>2</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td>X</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Adding up the numbers with an ‘X’ beneath them gives a total of 254, which means is FE when converted to hexadecimal. Each byte of graphical data must be converted to hexadecimal in this manner. There is no need to change the X representations, as they are merely comments with no bearing on the final bin file. Save your file.</p>

<h3 id="5-assemble-the-source-code">5) Assemble the source code</h3>

<p>Run the following in terminal:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dasm spcinvad.src -f3 -otest1.bin
</code></pre>
</div>

<p>Now your edited source file has been reassembled by DASM, and you can run your test1.bin file on an emulator to play Space Invaders with your modified sprites.</p>

  </div>

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Invading the invaders</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Invading the invaders
            
            </li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>This site contains information and tutorials on hacking the Atari
               &#39;Space Invaders&#39; game.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
